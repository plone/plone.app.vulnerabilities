<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">
<body define="global sr python:True;">

<metal:javascript fill-slot="javascript_head_slot">
  <script>
    jQuery(function($) {
        $('.show_unsupported_version').click(function(){
          $('.non_supported_version').show();
        });
    });
  </script>
</metal:javascript>

<metal:override fill-slot="top_slot"
    tal:define="disable_column_two python:request.set('disable_plone.rightcolumn',0);"/>

<metal:content-core fill-slot="main">
    <metal:content-core define-macro="main">

      <h1>Plone versions - security support - maintenance - Hotfixes</h1>


      <button class="show_unsupported_version">Show unsupported versions</button>

      <table id="hotfixes" class="listing">
        <thead>
          <th>Plone version</th>
          <th>Release date</th>
          <th>Security support</th>
          <th>Active Maintenance</th>
          <th>Hotfix</th>
        </thead>
        <tal:versions repeat="version view/get_versions">
          <tr class="" tal:define="hotfixes python: view.get_hotfixes_for_version(version['name'])"
              tal:attributes="class python:'non_supported_version' if not version['security'] and not version['maintenance'] else 'supported_version'">
            <td tal:content="version/name"></td>
            <td tal:content="version/date"></td>
            <td tal:content="version/security" tal:attributes="class python: 'good' if version['security'] else 'bad'"></td>
            <td tal:content="version/maintenance"  tal:attributes="class python: 'good' if version['maintenance'] else 'bad'"></td>
            <td>
              <tal:hotfixes tal:repeat="hotfix hotfixes">
                <a href="" tal:attributes="href hotfix/getURL" tal:content="hotfix/id">Hotfix</a> <br/>
              </tal:hotfixes>
            </td>
          </tr>
        </tal:versions>
      </table>
  </metal:content-core>
</metal:content-core>

<metal:column-two fill-slot="portlets_two_slot">
  <div class="portletWrapper">
    <dl class="portlet">
    <dt class="portletHeader">
            <span>Hotfixes</span>
    </dt>
    <dd  tal:repeat="hotfix view/get_hotfixes" class="portletItem">
      <a href="" tal:attributes="href hotfix/getURL" tal:content="hotfix/id">Hotfix</a>
    </dd>
    </dl>
  </div>
</metal:column-two>


</body>
</html>

